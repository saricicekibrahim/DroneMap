<!DOCTYPE html>
<html>
<head>
<title>İbo's Drone Map</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="favicon.ico" rel="icon" type="image/x-icon" />

<link rel="stylesheet" href="node_modules/openlayers/css/ol.css" type="text/css">
<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="bower_components/bootstrap-sidebar/style.css" />
<link rel="stylesheet" href="bower_components/bootstrap-sidebar/dist/css/sidebar.css" />

<script src="bower_components/angular/angular.min.js"></script>
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="bower_components/bootstrap-sidebar/dist/js/sidebar.js"></script>

<script src="node_modules/openlayers/dist/ol.js" type="text/javascript"></script>

<style>
body {
	padding: 0;
	margin: 0;
	overflow: hidden;
}

html, body, #map {
	height: 100%;
}

.map {
	margin-top: 53px;
}

.ol-control button {
	background-color: rgba(0, 0, 0, 0.5);
}

.ol-attribution button, .ol-attribution ul {
	display: none;
}

.ol-control button:focus, .ol-control button:hover {
	text-decoration: none;
	background-color: rgba(203, 36, 0, 0.7);
}

.sidebar {
	background-color: black;
	width: 32%;
}

.container-fluid {
	background-color: black;
}

h3 {
	color: white;
}

.rcorners {
	border-radius: 10px;
	background: gray;
	padding: 3px;
	margin-bottom: 4px;
}
</style>

</head>
<body>
	<div ng-app="droneApp" ng-controller="droneCtrl">
		<div class="navbar navbar-static navbar-default navbar-fixed-top">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle toggle-left hidden-md hidden-lg">
						<span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">İbo's Drone Map</a>
				</div>
				<button type="button" class="navbar-toggle toggle-right" data-toggle="sidebar" data-target=".sidebar-right">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
			</div>
		</div>

		<div class="container-fluid">
			<div class="row">
				<div class="col-xs-7 col-sm-3 col-md-3 sidebar sidebar-right sidebar-animate">
					<div class="input-group add-on">
						<input ng-change="myFunc()" class="form-control" ng-model="searchValue" type="text" placeholder="Ara">
						<div class="input-group-btn">
							<button class="btn btn-default" type="submit">
								<i class="glyphicon glyphicon-search"></i>
							</button>
						</div>
					</div>
					<br>
					<div ng-repeat="data in fusionData" class="rcorners">
						<h3>{{data[3]}}</h3>
						<ul class="nav navbar-stacked">
							<iframe width="100%" height="315" ng-src="{{getIframeSrc(data[2])}}" frameborder="0" allowfullscreen></iframe>
						</ul>
					</div>
					>
				</div>
			</div>
		</div>
		<div id="map" class="map"></div>
	</div>

	<script>
		var app = angular.module('droneApp', []);
		app.controller('droneCtrl', function($scope, $http, $sce) {
			//https://www.googleapis.com/fusiontables/v1/query?sql=SELECT * FROM 1MIt8HjHPRe4_rifTaAwpK72vJ6c-oJdoa5c8Ryd7 where descriptor like 'Ankara%25' limit 5&key=AIzaSyCrjxOUtz0PEtDh9tDn6sjzObkC9dqQ1oA

			var map = new ol.Map({
				target : 'map',
				layers : [ new ol.layer.Tile({
					source : new ol.source.OSM()
				}) ],
				view : new ol.View({
					center : ol.proj.transform([ 32.9, 39.9 ], 'EPSG:4326',
							'EPSG:3857'),
					zoom : 15
				})
			});

			app.config(function($sceDelegateProvider) {
				$sceDelegateProvider.resourceUrlWhitelist([ 'self',
						'https://www.youtube.com/**' ]);
			});

			$scope.searchValue = "";

			$scope.getIframeSrc = function(src) {
				return $sce.trustAsResourceUrl("https://www.youtube.com/embed/"
						+ src);
			};

			$scope.myFunc = function() {

				$scope.fusionData = [

				];
			};

			//$http.get("https://www.googleapis.com/fusiontables/v1/query?sql=SELECT * FROM 1MIt8HjHPRe4_rifTaAwpK72vJ6c-oJdoa5c8Ryd7 limit 5&key=AIzaSyCrjxOUtz0PEtDh9tDn6sjzObkC9dqQ1oA")
			//.then(function(response) {
			//$scope.fusionData = response.data.rows;
			$scope.fusionData = [
					[ "1", "39.9,32.9", "Q3YtHNH1duo", "Ankara Üniversitesi" ],
					[ "2", "39,32", "8ZuftjyKzoI", "Ankara sit." ] ];
			//angular.forEach(response.data.rows, function(value, key) {
			//$scope.fusionData.push(value[3]);
			//});
			//});
		});
	</script>
</body>
</html>
